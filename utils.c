//
// Created by loona on 10/25/21.
//

#include <unistd.h>
#include <stdio.h>
#include <sys/poll.h>
#include "utils.h"

void sendStr(int fd, char* buffer, size_t countChar) {
    write(fd, buffer, countChar);
    write(fd, "\n", 1);
}

void readAllAndPrintLine(int fd) {
    char letter = 0;
    struct pollfd pipeFd = {fd, POLLIN, 0};

    if (poll(&pipeFd, 1, 3000) < 1) {
        return;
    }

    while (pipeFd.revents & POLLIN) {
        read(fd, &letter, 1);
        putchar(letter);
        poll(&pipeFd, 1, 3000);
    }
}
